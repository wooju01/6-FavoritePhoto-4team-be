# [4íŒ€] ìµœì• ì˜ í¬í† 
![ìµœì• ì˜ í¬í† 1](https://github.com/user-attachments/assets/8edeaded-c705-45d5-9334-a232067d7092)

<br />

## ğŸ“‘ ëª©ì°¨

1. ğŸ”¹ [í”„ë¡œì íŠ¸ ì†Œê°œ](#í”„ë¡œì íŠ¸-ì†Œê°œ)
2. ğŸ”¹ [ê¸°ìˆ  ìŠ¤íƒ](#ê¸°ìˆ -ìŠ¤íƒ)
3. ğŸ”¹ [ì‹œìŠ¤í…œ ì•„í‚¤í…ì³](#ì‹œìŠ¤í…œ-ì•„í‚¤í…ì³)
4. ğŸ”¹ [íŒ€ì› ì†Œê°œ](#íŒ€ì›-ì†Œê°œ)
5. ğŸ”¹ [í”„ë¡œì íŠ¸ ê¸°ëŠ¥](#í”„ë¡œì íŠ¸-ê¸°ëŠ¥)
6. ğŸ”¹ [íŠ¸ëŸ¬ë¸” ìŠˆíŒ…](#íŠ¸ëŸ¬ë¸”-ìŠˆíŒ…)

<br />

## ğŸ“¸ í”„ë¡œì íŠ¸ ì†Œê°œ

https://github.com/user-attachments/assets/20c3e346-5d42-486d-8de4-a9c2e8f49e68

ìµœì• ì˜ í¬í† ëŠ” ë‹¹ì‹ ì˜ â€˜ìµœì• â€™ ìˆœê°„ë“¤ì„ ì‚¬ì§„ìœ¼ë¡œ ë‹´ì•„ ê°„ì§í•˜ê³  ê³µìœ í•  ìˆ˜ ìˆëŠ” ê°ì„± ê¸°ë°˜ì˜ í¬í†  ê¸°ë¡ í”Œë«í¼ì…ë‹ˆë‹¤. â€˜ê°€ì¥ ì¢‹ì•„í•˜ëŠ” ê²ƒâ€™ì„ ëœ»í•˜ëŠ” â€˜ìµœì• â€™ì™€ ì†Œì¤‘í•œ â€˜ì‚¬ì§„â€™ì„ ëª¨ì€ë‹¤ëŠ” ì˜ë¯¸ì—ì„œ íƒ„ìƒí–ˆìŠµë‹ˆë‹¤. ì¼ìƒ ì†ì—ì„œ ë†“ì¹˜ê³  ì‹¶ì§€ ì•Šì€ ìˆœê°„ë“¤, ë‚˜ë§Œì˜ ì·¨í–¥ê³¼ ê°ì •ì„ í‘œí˜„í•˜ê³  ì‹¶ì€ ì‚¬ì§„ë“¤, ìµœì• ì˜ í¬í† ì— ë‹´ì•„ë³´ì„¸ìš”. í˜ëŸ¬ê°€ëŠ” SNSê°€ ì•„ë‹Œ, ë‹¹ì‹ ë§Œì˜ ì˜ë¯¸ ìˆëŠ” ì•„ì¹´ì´ë¸Œ ê³µê°„ì—ì„œ íŠ¹ë³„í•œ ì‚¬ì§„ë“¤ì„ ëª¨ìœ¼ê³ , ì •ë¦¬í•˜ê³ , ê°„ì§í•´ë³´ì„¸ìš”.

1ï¸âƒ£ **ì¹´ë“œ ìƒì„±**: ë‚´ê°€ ì¢‹ì•„í•˜ëŠ” ì‚¬ì§„ì„ ì˜¨ë¼ì¸ ê³µê°„ì— ì˜¬ë¦¬ê³  ì €ì¥í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

2ï¸âƒ£ **í¬ì¸íŠ¸ ì œë„**: í•œ ì‹œê°„ì— í•œ ë²ˆ, ëœë¤ í¬ì¸íŠ¸ë¥¼ ë°›ì„ ìˆ˜ ìˆê³ , ê·¸ í¬ì¸íŠ¸ë¡œ ì¹´ë“œë¥¼ ê±°ë˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

3ï¸âƒ£ **ì¹´ë“œ ê±°ë˜**: ë‚´ê°€ ë§Œë“  ì¹´ë“œë¥¼ íŒë§¤í•˜ê±°ë‚˜ ë‹¤ë¥¸ ì‚¬ìš©ìê°€ ë§Œë“  ì¹´ë“œë¥¼ êµ¬ì…í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

4ï¸âƒ£ **ì¹´ë“œ êµí™˜**: ë‚´ ì¹´ë“œì™€ íŒë§¤ ì¤‘ì¸ ì¹´ë“œë¥¼ 1:1 êµí™˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

5ï¸âƒ£ **ì•Œë¦¼ ê¸°ëŠ¥**: ì¹´ë“œ ê±°ë˜Â·êµí™˜ ì‹œ *ì‹¤ì‹œê°„*ìœ¼ë¡œ ì•Œë¦¼ì„ ë°›ìŠµë‹ˆë‹¤.

6ï¸âƒ£ **ë‹¤ì–‘í•œ í•„í„° ê¸°ëŠ¥**: ìƒí™©ì— ë”°ë¼ ê²€ìƒ‰, ì •ë ¬, í•„í„°ë§ ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤.

<br />


## ğŸ”— íŒ€ ë¬¸ì„œ ë³´ê¸°  
ğŸ‘‰ [Notion ë§í¬ ë°”ë¡œê°€ê¸°](https://www.notion.so/4-1f388b3cb86180888609db626a03fb0a)  

â¡ï¸ ë‹¤ìŒì€ í”„ë¡ íŠ¸ì—”ë“œ Git ì €ì¥ì†Œì…ë‹ˆë‹¤.  
ğŸ”§ [GitHub Repository ë³´ëŸ¬ê°€ê¸°](https://github.com/afafmmm/6-FavoritePhoto-4team-fe)


<br />

## ğŸ–¥ï¸ ê¸°ìˆ  ìŠ¤íƒ

#### âœ”ï¸ ì–¸ì–´
<span><img src="https://img.shields.io/badge/javascript-F7DF1E?style=for-the-badge&logo=javascript&logoColor=white" alt="javascript" /></span>
<span><img src="https://img.shields.io/badge/PostgreSQL-336791?style=for-the-badge&logo=postgresql&logoColor=white" alt="PostgreSQL" /></span>

#### âœ”ï¸ í”„ë ˆì„ì›Œí¬ & ë¼ì´ë¸ŒëŸ¬ë¦¬
<span><img src="https://img.shields.io/badge/Express-000000?style=for-the-badge&logo=express&logoColor=white" alt="Express" /></span>
<span><img src="https://img.shields.io/badge/Prisma-2D3748?style=for-the-badge&logo=prisma&logoColor=white" alt="Prisma" /></span>
<span><img src="https://img.shields.io/badge/passport-34E27A?style=for-the-badge&logo=passport&logoColor=white" alt="passport" /></span>
<span><img src="https://img.shields.io/badge/jsonwebtokens-000000?style=for-the-badge&logo=jsonwebtokens&logoColor=white" alt="jsonwebtokens" /></span>
<span><img src="https://img.shields.io/badge/socketdotio-010101?style=for-the-badge&logo=socketdotio&logoColor=white" alt="socketdotio" /></span>

#### âœ”ï¸ ë²„ì „ ê´€ë¦¬ ì™¸
<span><img src="https://img.shields.io/badge/Git-F05032?style=for-the-badge&logo=git&logoColor=white" alt="Git" /></span>
<span><img src="https://img.shields.io/badge/GitHub-181717?style=for-the-badge&logo=github&logoColor=white" alt="GitHub" /></span>
<span><img src="https://img.shields.io/badge/Node.js-339933?style=for-the-badge&logo=node.js&logoColor=white" alt="Node.js" /></span>
<span><img src="https://img.shields.io/badge/npm-CB3837?style=for-the-badge&logo=npm&logoColor=white" alt="npm" /></span>

#### âœ”ï¸ ë°°í¬
<span><img src="https://img.shields.io/badge/render-000000?style=for-the-badge&logo=render&logoColor=white" alt="render" /></span>

<br />

## ğŸ’¾ ì‹œìŠ¤í…œ ì•„í‚¤í…ì³

(FE ì•„í‚¤í…ì³ëŠ” ë”°ë¡œ ìˆìŠµë‹ˆë‹¤.)

![Web App Reference Architecture (1)](https://github.com/user-attachments/assets/15283051-29b9-4b74-8375-3c4f14f73531)



<br />

## ğŸ‘« íŒ€ì› ì†Œê°œ

<table align="center">
  <tbody>
    <tr>
      <td align="center">
        <a href="https://github.com/afafmmm">
          <img src="https://github.com/afafmmm.png?size=100" width="100px" alt="ì´ì§€ìˆ˜ GitHub"/>
          <br />
          <sub><b>ì´ì§€ìˆ˜</b></sub>
        </a>
      </td>
      <td align="center">
        <a href="https://github.com/fs6-kde">
          <img src="https://github.com/fs6-kde.png?size=100" width="100px" alt="ê¹€ë‹¤ì€ GitHub"/>
          <br />
          <sub><b>ê¹€ë‹¤ì€</b></sub>
        </a>
      </td>
      <td align="center">
        <a href="https://github.com/wooju01">
          <img src="https://github.com/wooju01.png?size=100" width="100px" alt="ê¹€ìš°ì£¼ GitHub"/>
          <br />
          <sub><b>ê¹€ìš°ì£¼</b></sub>
        </a>
      </td>
      <td align="center">
        <a href="https://github.com/writing-sky">
          <img src="https://github.com/writing-sky.png?size=100" width="100px" alt="ì–‘ì„±ê²½ GitHub"/>
          <br />
          <sub><b>ì–‘ì„±ê²½</b></sub>
        </a>
      </td>
      <td align="center">
        <a href="https://github.com/xdnjs7">
          <img src="https://github.com/xdnjs7.png?size=100" width="100px" alt="ì¥ì›ë¹ˆ GitHub"/>
          <br />
          <sub><b>ì¥ì›ë¹ˆ</b></sub>
        </a>
      </td>
      <td align="center">
        <a href="https://github.com/az0319h">
          <img src="https://github.com/az0319h.png?size=100" width="100px" alt="í™ì„±í›ˆ GitHub"/>
          <br />
          <sub><b>í™ì„±í›ˆ</b></sub>
        </a>
      </td>
    </tr>
  </tbody>
</table>

<br />

## ğŸ•¹ï¸ í”„ë¡œì íŠ¸ ê¸°ëŠ¥
### 1. ERD
![image](https://github.com/user-attachments/assets/67b8d924-4f42-40a0-8912-050f2dedc801)

<br />

### 2. API ëª©ë¡
#### ğŸ‘¤ ì‚¬ìš©ì [`User`]
| Method | Endpoint                    | ì„¤ëª…               |
| ------ | --------------------------- | ---------------- |
| GET    | `/users`                    | ë¡œê·¸ì¸í•œ ì‚¬ìš©ì ì •ë³´ ì¡°íšŒ   |
| GET    | `/users/card-meta`          | ì¥ë¥´ + ë“±ê¸‰ ë©”íƒ€ ì •ë³´ ì¡°íšŒ |
| GET    | `/users/monthly-post-count` | ì›”ë³„ ì¹´ë“œ ìƒì„± íšŸìˆ˜ ì¡°íšŒ   |
| GET    | `/users/cards-count`        | ì‚¬ìš©ì ì¹´ë“œ ìˆ˜ëŸ‰ (ë“±ê¸‰ë³„)  |
| POST   | `/users/post`               | í¬í† ì¹´ë“œ ë“±ë¡          |
| GET    | `/users/gallery`            | ë‚´ ì¹´ë“œ ê°¤ëŸ¬ë¦¬ ì¡°íšŒ      |
| GET    | `/users/gallery/:id`        | íŠ¹ì • í¬í† ì¹´ë“œ ìƒì„¸ ì¡°íšŒ    |
| GET    | `/users/cards-on-sale`      | íŒë§¤/êµí™˜ ì¤‘ì¸ ì¹´ë“œ ì¡°íšŒ   |


#### ğŸ†” ì¸ì¦ [`Auth`]
| Method | Endpoint                | ì„¤ëª…              |
| ------ | ----------------------- | --------------- |
| POST   | `/auth/signup`          | íšŒì›ê°€ì…            |
| POST   | `/auth/login`           | ë¡œê·¸ì¸             |
| POST   | `/auth/logout`          | ë¡œê·¸ì•„ì›ƒ            |
| POST   | `/auth/refresh-token`   | ì•¡ì„¸ìŠ¤ í† í° ì¬ë°œê¸‰      |
| GET    | `/auth/google`          | êµ¬ê¸€ OAuth ë¡œê·¸ì¸ ì‹œì‘ |
| GET    | `/auth/google/callback` | êµ¬ê¸€ ë¡œê·¸ì¸ ì½œë°±       |
| GET    | `/auth/google/fail`     | êµ¬ê¸€ ë¡œê·¸ì¸ ì‹¤íŒ¨       |



#### ğŸ’³ íŒë§¤ [`Sale`]
| Method | Endpoint               | ì„¤ëª…       |
| ------ | ---------------------- | -------- |
| POST   | `/sales/cards`         | ì¹´ë“œ íŒë§¤ ë“±ë¡ |
| GET    | `/sales/cards/:saleId` | íŒë§¤ ìƒì„¸ ì¡°íšŒ |
| PATCH  | `/sales/cards/:saleId` | íŒë§¤ ìˆ˜ì •    |
| DELETE | `/sales/cards/:saleId` | íŒë§¤ ì·¨ì†Œ    |


#### ğŸ›ï¸ êµ¬ë§¤ [`Purchase`]
| Method | Endpoint                       | ì„¤ëª…       |
| ------ | ------------------------------ | -------- |
| POST   | `/purchase/cards/:id/purchase` | ì¹´ë“œ êµ¬ë§¤ ìš”ì²­ |


#### ğŸ”„ êµí™˜ [`Trade`]
| Method | Endpoint                        | ì„¤ëª…                |
| ------ | ------------------------------- | ----------------- |
| GET    | `/cards/:saleId/trade-requests` | íŠ¹ì • íŒë§¤ì¹´ë“œì˜ êµí™˜ ìš”ì²­ ëª©ë¡ |
| PATCH  | `/trade/:id/accept`             | êµí™˜ ìš”ì²­ ìˆ˜ë½          |
| PATCH  | `/trade/:id/reject`             | êµí™˜ ìš”ì²­ ê±°ì ˆ          |


##### ğŸ”„ êµí™˜ ìš”ì²­ [`TradeRequest`]
| Method | Endpoint                                               | ì„¤ëª…               |
| ------ | ------------------------------------------------------ | ---------------- |
| POST   | `/cards/:saleId/exchange`                              | êµí™˜ ìš”ì²­ ìƒì„±         |
| PATCH  | `/cards/:listedCardId/exchange/:tradeRequestId/cancel` | êµí™˜ ìš”ì²­ ì·¨ì†Œ         |
| GET    | `/cards/:saleId/exchange`                              | ì‹ ì²­ìì˜ êµí™˜ ìš”ì²­ ëª©ë¡ ì¡°íšŒ |


#### ğŸ’° í¬ì¸íŠ¸ [`Point`]
| Method | Endpoint             | ì„¤ëª…           |
| ------ | -------------------- | ------------ |
| POST   | `/points/random-box` | ëœë¤ í¬ì¸íŠ¸ ìƒì ë½‘ê¸° |
| GET    | `/points/me`         | ë‚´ í¬ì¸íŠ¸ ì¡°íšŒ     |
| POST   | `/points/update`     | í¬ì¸íŠ¸ ì¦ê° ì²˜ë¦¬    |


#### ğŸ”” ì•Œë¦¼ [`/notification`]
| Method | Endpoint                  | ì„¤ëª…           |
| ------ | ------------------------- | ------------ |
| POST   | `/notifications`          | ì•Œë¦¼ ìƒì„±        |
| GET    | `/notifications`          | ì‚¬ìš©ì ì•Œë¦¼ ëª©ë¡ ì¡°íšŒ |
| GET    | `/notifications/:id`      | ì•Œë¦¼ ìƒì„¸ ì¡°íšŒ     |
| PATCH  | `/notifications/:id/read` | ì•Œë¦¼ ì½ìŒ ì²˜ë¦¬     |
| DELETE | `/notifications/:id`      | ì•Œë¦¼ ì‚­ì œ        |


<br />

## ğŸ’£ íŠ¸ëŸ¬ë¸” ìŠˆíŒ…
<a name="troubleshooting"></a>
<details>
<summary>ğŸ–¼ï¸ íŒë§¤ ìˆ˜ì • : `saleQuantity` ê³„ì‚°</summary>

<br>

### ğŸ”§ ë¬¸ì œ ìƒí™©
- íŒë§¤ ìˆ˜ì •ì—ì„œ íŒë§¤ ìˆ˜ëŸ‰ì„ ë³€ê²½í•  ë•Œ, ê¸°ì¡´ íŒë§¤ ìˆ˜ëŸ‰ë³´ë‹¤ ë§ì„ ê²½ìš°ì™€ ë°˜ëŒ€ë¡œ ë” ì ì„ ê²½ìš°ì— ëŒ€í•œ êµ¬í˜„ì´ ì–´ë ¤ì› ìŒ 
- ê° ì¹´ë“œì˜ ìƒíƒœë„ ê°™ì´ ë°”ë€Œì–´ì•¼ í•˜ê³ , ë™ì‹œì— íŒë§¤ ìˆ˜ëŸ‰ê³¼ ë³´ìœ  ìˆ˜ëŸ‰ì˜ ìˆ«ìê°€ ë™ì‹œì— ë°”ë€Œì–´ì•¼ í•˜ê¸° ë•Œë¬¸ì— ë³µì¡í–ˆìŒìŒ

### ğŸ“Œ ì›ì¸ íŒŒì•…
- ë³´ìœ ìˆ˜ëŸ‰ ì¹´ë“œ ì¡°íšŒ ë¶€ë¶„ì—ì„  ì‹¤ì œ ìœ ì €ê°€ ì†Œìœ í•œ **ë³´ìœ  ì¹´ë“œë¥¼ ê°ì²´ë¡œ ê·¸ ìˆ˜ë§Œí¼ ë‚˜ì—´**í•˜ì—¬ êµ¬í˜„í•˜ê¸° í¸í–ˆìœ¼ë‚˜,
- íŒë§¤ ì¹´ë“œ ê´€ë ¨ ì¡°íšŒëŠ” ê°ì²´ ë‚˜ì—´ì´ ì•„ë‹Œ **ìˆ«ìë¡œë§Œ ê³„ì‚°í•˜ëŠ” êµ¬ì¡°**ë¡œ ë˜ì–´ ìˆì–´ ì´ ë‘˜ì„ í•©ì³ì„œ êµ¬í˜„í•˜ê¸° ì‰½ì§€ ì•Šì•˜ìŒ
  
### ğŸ› ï¸ í•´ê²° ë°©ë²•
- `quantityDiff`ë¡œ **ë³€ê²½í•œ íŒë§¤ìˆ˜ëŸ‰ê°’ê³¼ ê¸°ì¡´ íŒë§¤ ìˆ˜ëŸ‰ê°’ì˜ ì°¨ì´ë¥¼ ê³„ì‚°í•œ ë³€ìˆ˜**ë¥¼ ë§Œë“¤ì–´
- `quantityDiff`ê°€ 0ë³´ë‹¤ í¬ë©´, ì¦‰ ê¸°ì¡´ íŒë§¤ìˆ˜ëŸ‰ë³´ë‹¤ í°ê°’ìœ¼ë¡œ ë³€ê²½í•˜ë©´ ë³´ìœ ìˆ˜ëŸ‰ ì¹´ë“œì—ì„œ `quantityDiff`ë§Œí¼ ê°€ì ¸ì™€ ì¶”ê°€
- `quantityDiff`ê°€ 0ë³´ë‹¤ ì‘ìœ¼ë©´, ì¦‰ ê¸°ì¡´ íŒë§¤ìˆ˜ëŸ‰ë³´ë‹¤ ë” ì‘ì€ê°’ìœ¼ë¡œ ë³€ê²½í•˜ë©´ íŒë§¤ë“±ë¡ëœ ì¹´ë“œì—ì„œ `quantityDiff`ë§Œí¼ ë‹¤ì‹œ ë³´ìœ ìˆ˜ëŸ‰ ì¹´ë“œë¡œ ëŒì•„ê°

### âœ… ì „í™˜ ê²°ê³¼
- `quantityDiff`ë¥¼ ë”°ë¡œ ë§Œë“¤ì–´ ê³„ì‚°í•˜ë‹ˆ íŒë§¤ìˆ˜ëŸ‰ ìˆ˜ì •ì´ ì•Œë§ê²Œ ì‘ë™í•¨
- ë³´ìœ ìˆ˜ëŸ‰ ì¹´ë“œì—ì„œ ë” ê°€ì ¸ì™€ì•¼ í•˜ëŠ” ê²½ìš°ì—”, ë³´ìœ ìˆ˜ëŸ‰ ì¹´ë“œ ì¡°íšŒì—ì„œ ê·¸ë§Œí¼ ê°ì²´ê°€ ë¹ ì ¸ë‚˜ê°”ìŒ
- íŒë§¤í•œ ì¹´ë“œë¥¼ ë‹¤ì‹œ ë³´ìœ ìˆ˜ëŸ‰ ì¹´ë“œë¡œ ì „í™˜í•˜ëŠ” ê²½ìš°ì—”, ë³´ìœ ìˆ˜ëŸ‰ ì¹´ë“œ ì¡°íšŒì—ì„œ ê·¸ë§Œí¼ ê°ì²´ê°€ ë‹¤ì‹œ ìƒì„±ëìŒ 

### ğŸ’» ë¬¸ì œ í•´ê²° ë°©ë²• CODE

íŒë§¤ìˆ˜ëŸ‰ê°’ ê°±ì‹  ë¬¸ì œë¥¼ í•´ê²°í•œ ì½”ë“œì…ë‹ˆë‹¤:

```ts
if (updatePayload.saleQuantity !== undefined) {
      const quantityDiff = updatePayload.saleQuantity - sale.saleQuantity;

      if (quantityDiff > 0) {
        const extraCards = await tx.userCard.findMany({
          where: {
            ownerId: userId,
            photoCardId: sale.photoCardId,
            status: 'ACTIVE'
          },
          take: quantityDiff
        });

        await Promise.all(
          extraCards.map((card) =>
            tx.saleUserCard.create({
              data: {
                saleId,
                userCardId: card.id
              }
            })
          )
        );

        await tx.userCard.updateMany({
          where: { id: { in: extraCards.map((c) => c.id) } },
          data: { status: 'AVAILABLE' }
        });
      } else if (quantityDiff < 0) {
        const removeCount = -quantityDiff;
        const removableCards = sale.saleUserCards.slice(-removeCount);

        await tx.saleUserCard.deleteMany({
          where: { id: { in: removableCards.map((r) => r.id) } }
        });

        await tx.userCard.updateMany({
          where: { id: { in: removableCards.map((r) => r.userCardId) } },
          data: { status: 'ACTIVE' }
        });
      }
```
</details>

<details>
<summary>ğŸ”— íŒë§¤ ìƒì„¸ ì •ë³´ + êµí™˜ ì¡°ê±´ API í†µí•© ë¬¸ì œ</summary>

<br>

### ğŸ”§ ë¬¸ì œ ìƒí™©

ê¸°ì¡´ì—ëŠ” **í¬í† ì¹´ë“œ íŒë§¤ ìƒì„¸ ì •ë³´**ì™€ **í•´ë‹¹ íŒë§¤ê±´ì˜ êµí™˜ ì¡°ê±´ ì •ë³´(ì›í•˜ëŠ” ì¥ë¥´/ë“±ê¸‰ ë“±)**ë¥¼  
**ì„œë¡œ ë‹¤ë¥¸ APIë¡œ ë¶„ë¦¬í• ì§€ ì—¬ë¶€**ì— ëŒ€í•œ ë…¼ì˜ê°€ ìˆì—ˆë‹¤.

- í”„ë¡ íŠ¸ì—ì„œëŠ” ë‘ ì •ë³´ê°€ **í•œ í™”ë©´ì— í•¨ê»˜ í•„ìš”**
- ë°±ì—”ë“œëŠ” í•´ë‹¹ ì •ë³´ë¥¼ **ì„œë¡œ ë‹¤ë¥¸ ëª¨ë¸/ì„œë¹„ìŠ¤ì—ì„œ ê´€ë¦¬ ì¤‘**
- APIë¥¼ **ë¶„ë¦¬í• ì§€, í†µí•©í• ì§€** ê²°ì •ì´ í•„ìš”í–ˆìŒ

---

### ğŸ“Œ ì›ì¸ íŒŒì•…

1. **ë‘ ê°œì˜ APIë¡œ ë¶„ë¦¬í•  ê²½ìš°**
   - í”„ë¡ íŠ¸ì—ì„œ **ë‘ ë²ˆ ìš”ì²­** í•„ìš” â†’ **ì‘ë‹µ íƒ€ì´ë° ê´€ë¦¬ ë³µì¡**
   - ë¹„ë™ê¸° ì²˜ë¦¬ ë° ì—ëŸ¬ í•¸ë“¤ë§ ë¶€ë‹´ ì¦ê°€
   - í•˜ë‚˜ì˜ íŒë§¤ ì •ë³´ ì¡°íšŒì— ëŒ€í•´ **ë¶ˆí•„ìš”í•œ DB í˜¸ì¶œ ì¤‘ë³µ**

2. **API í†µí•©í•  ê²½ìš°**
   - ë°±ì—”ë“œ êµ¬ì¡° ì„¤ê³„ê°€ ë‹¤ì†Œ ë³µì¡
   - í•˜ì§€ë§Œ í˜¸ì¶œ íšŸìˆ˜ ìµœì†Œí™” + í´ë¼ì´ì–¸íŠ¸ ì²˜ë¦¬ ê°„í¸
   - **ì‘ë‹µ êµ¬ì¡° ì¼ê´€ì„±** í™•ë³´ ê°€ëŠ¥

---

### ğŸ› ï¸ í•´ê²° ë°©ë²•

âœ… **APIë¥¼ í•˜ë‚˜ë¡œ í†µí•©í•˜ê¸°ë¡œ ê²°ì •**

- ë°±ì—”ë“œ ë‹´ë‹¹ìì—ê²Œ **í†µí•©í˜• ì‘ë‹µ êµ¬ì¡°ë¡œ êµ¬í˜„ ìš”ì²­**
- ê¸°ì¡´ `íŒë§¤ ìƒì„¸ ì¡°íšŒ API`ë¥¼ ìˆ˜ì •í•˜ì—¬  
  â†’ **ì¹´ë“œ ì •ë³´ + êµí™˜ ì¡°ê±´ ì •ë³´ê¹Œì§€ í¬í•¨í•˜ë„ë¡ ê°œì„ **

---

### ğŸ’» ë¬¸ì œ í•´ê²° ë°©ë²• CODE
#### ğŸ“Œ API
GET /api/store/cards/:saleId
#### ğŸ”¹ Controller

```ts
salesController.get('/cards/:saleId', ..., async (req, res) => {
  const saleId = Number(req.params.saleId);
  const result = await SalesService.getSaleDetail(saleId);

  if (sale.sellerId !== req.user.id) {
    throw new Error('ë³¸ì¸ì˜ íŒë§¤ ì •ë³´ë§Œ ì—´ëŒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.');
  }

  res.status(200).json(result);
});
ğŸ”¹ Service
```ts
async function getSaleDetail(saleId) {
  const sale = await SalesRepository.findSaleDetailById(saleId);
  if (!sale) throw new Error('ì¡´ì¬í•˜ì§€ ì•ŠëŠ” íŒë§¤ í•­ëª©ì…ë‹ˆë‹¤.');
  return sale;
}
```
ğŸ”¹ Repository
```ts
async function findSaleDetailById(saleId) {
  return prisma.sale.findUnique({
    where: { id: saleId },
    include: {
      photoCard: {
        include: {
          grade: true,
          genre: true,
          creator: { select: { id: true, nickname: true } },
          userCards: {
            where: { status: 'ACTIVE' },
            include: {
              owner: { select: { id: true, nickname: true } }
            }
          }
        }
      },
      saleUserCards: {
        include: {
          userCard: true
        }
      },
      desiredGrade: true,
      desiredGenre: true
    }
  });
}
```

### ğŸ“¦ í¬í•¨ë˜ëŠ” ì •ë³´
- photoCard: ì¹´ë“œ ì •ë³´ (ë“±ê¸‰, ì¥ë¥´, ì œì‘ì, ê´€ë ¨ ìœ ì €ì¹´ë“œ ë“±)
- saleUserCards: íŒë§¤ ê±´ì— ì—°ê²°ëœ ì‹¤ë¬¼ ì¹´ë“œë“¤
- desiredGrade, desiredGenre: êµí™˜ ì¡°ê±´ ì •ë³´

### âœ… ê²°ê³¼ ë° íš¨ê³¼
- API í•œ ë²ˆ í˜¸ì¶œë¡œ ëª¨ë“  ë°ì´í„° ìˆ˜ì§‘ ê°€ëŠ¥
- í´ë¼ì´ì–¸íŠ¸ ë Œë”ë§ ê°„ì†Œí™” + ì†ë„ í–¥ìƒ
- êµí™˜ ì¡°ê±´ ì¼ì¹˜ ì—¬ë¶€ íŒë‹¨ë„ ë™ì¼ APIë¡œ ì²˜ë¦¬ ê°€ëŠ¥
- ì „ì²´ì ìœ¼ë¡œ ì‚¬ìš©ì ê²½í—˜(UX) ë° ê°œë°œ íš¨ìœ¨ í–¥ìƒ

</details>
